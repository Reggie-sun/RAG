<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Original Excerpt</title>
    <style>
        .border { border: 1px solid #ccc; }
        .p-3 { padding: 12px; }
        .rounded-lg { border-radius: 8px; }
        .bg-white { background: white; }
        .shadow-inner { box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
        .space-y-2 > * + * { margin-top: 8px; }
        .max-h-40 { max-height: 160px; }
        .overflow-hidden { overflow: hidden; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .inset-x-0 { left: 0; right: 0; }
        .bottom-0 { bottom: 0; }
        .h-14 { height: 56px; }
        .bg-gradient-to-t { background: linear-gradient(to top, rgba(255,255,255,1), rgba(255,255,255,0.7)); }
        .pointer-events-none { pointer-events: none; }
        button {
            border: 1px solid #007acc;
            background: white;
            color: #007acc;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
        }
        button:hover { background: #f0f8ff; }
    </style>
</head>
<body>
    <h1>原文摘录测试页面</h1>
    <p>测试修改：原文摘录应该默认展开</p>

    <div class="space-y-2">
        <h3>原文摘录（更多细节）</h3>
        <div id="excerpt-container" class="relative rounded-lg border border-slate-100/60 bg-white p-3 shadow-inner">
            <div id="content">
                这是一段测试的原文摘录内容，用于验证修改是否生效。<br>
                在正常情况下，这段内容应该默认展开显示。<br>
                如果修改成功，用户应该能直接看到这段完整的内容。<br>
                如果修改失败，这段内容会被折叠起来，只显示一部分。<br>
                可以通过下面的按钮来切换展开/折叠状态。
            </div>
        </div>
        <button onclick="toggleExpanded()">切换展开/收起</button>
    </div>

    <script>
        let expanded = true; // 默认展开 - 这是我们的修改

        function updateDisplay() {
            const container = document.getElementById('excerpt-container');

            if (!expanded) {
                container.classList.add('max-h-40', 'overflow-hidden');

                // 添加渐变遮罩
                let gradient = document.querySelector('.gradient-mask');
                if (!gradient) {
                    gradient = document.createElement('div');
                    gradient.className = 'pointer-events-none absolute inset-x-0 bottom-0 h-14 bg-gradient-to-t';
                    gradient.style.background = 'linear-gradient(to top, white, rgba(255,255,255,0.7))';
                    gradient.classList.add('gradient-mask');
                    container.appendChild(gradient);
                }
            } else {
                container.classList.remove('max-h-40', 'overflow-hidden');
                const gradient = document.querySelector('.gradient-mask');
                if (gradient) gradient.remove();
            }

            document.querySelector('button').textContent = expanded ? '收起原文' : '展开更多';
        }

        function toggleExpanded() {
            expanded = !expanded;
            updateDisplay();
        }

        // 初始化显示
        updateDisplay();

        console.log('原文摘录测试页面已加载，expanded =', expanded);
    </script>
</body>
</html>